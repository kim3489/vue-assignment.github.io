"use strict";(self["webpackChunkvue_assignment"]=self["webpackChunkvue_assignment"]||[]).push([[751],{1718:function(e,t,i){i.d(t,{H:function(){return l},_D:function(){return n},e2:function(){return o},eI:function(){return r}});var a=i(4373);const l=async e=>{try{const t=await a.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR`);return console.log(t.data.results[0]),t.data.results[0]}catch(t){console.error("Error fetching featured movie:",t)}},o=(e,t=1)=>`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${t}`,r=(e,t=2)=>`https://api.themoviedb.org/3/movie/now_playing?api_key=${e}&language=ko-KR&page=${t}`,n=(e,t,i=1)=>`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=${t}&language=ko-KR&page=${i}`},751:function(e,t,i){i.r(t),i.d(t,{default:function(){return M}});var a=i(6768),l=i(4232),o=i(144),r=i(292),n=i(2353);const s={class:"movie-grid",ref:"gridContainer"},u=["onMouseup"],v=["src","alt"],g={class:"movie-title"},c={key:0,class:"wishlist-indicator"},d={key:0,class:"pagination"},p=["disabled"],h=["disabled"];function m(e,t,i,o,r,n){return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",{class:(0,l.C4)(["grid-container",e.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.visibleMovieGroups,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)(["movie-row",{full:e.length===o.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onMouseup:t=>o.toggleWishlist(e)},[(0,a.Lk)("img",{src:o.getImageUrl(e.poster_path),alt:e.title},null,8,v),(0,a.Lk)("div",g,(0,l.v_)(e.title),1),o.isInWishlist(e.id)?((0,a.uX)(),(0,a.CE)("div",c,"👍")):(0,a.Q3)("",!0)],40,u)))),128))],2)))),128))],2),o.totalPages>1?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.prevPage&&o.prevPage(...e)),disabled:1===o.currentPage},"< 이전",8,p),(0,a.Lk)("span",null,(0,l.v_)(o.currentPage)+" / "+(0,l.v_)(o.totalPages),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.nextPage&&o.nextPage(...e)),disabled:o.currentPage===o.totalPages},"다음 >",8,h)])):(0,a.Q3)("",!0)],512)}i(4114),i(8992),i(8872);var w=i(4373),f=i(4040),k={name:"MovieGrid",props:{fetchUrl:{type:String,required:!0}},setup(e){const t=(0,o.KR)([]),i=(0,o.KR)(1),l=(0,o.KR)(null),r=(0,o.KR)(4),n=(0,o.KR)(20),s=(0,o.KR)(window.innerWidth<=768);(0,o.KR)("grid");let u=null;const{wishlist:v,loadWishlist:g,toggleWishlist:c,isInWishlist:d}=(0,f.n)(),p=async()=>{try{const i=120,a=Math.ceil(i/20);let l=[];for(let t=1;t<=a;t++){const i=await w.A.get(e.fetchUrl,{params:{page:t,per_page:n}});l=[...l,...i.data.results]}t.value=l.slice(0,i)}catch(i){console.error("Error fetching movies:",i)}},h=e=>`https://image.tmdb.org/t/p/w300${e}`,m=()=>{if(l.value){const e=l.value.offsetWidth,t=window.innerHeight-l.value.offsetTop,i=s.value?90:200,a=s.value?150:220,o=s.value?10:15,u=-10;r.value=Math.floor(e/(i+o));const v=Math.floor(t/(a+u));n.value=r.value*v}},k=(0,a.EW)((()=>{const e=(i.value-1)*n.value,a=e+n.value,l=t.value.slice(e,a);return l.reduce(((e,t,i)=>{const a=Math.floor(i/r.value);return e[a]||(e[a]=[]),e[a].push(t),e}),[])})),C=(0,a.EW)((()=>Math.ceil(t.value.length/n.value))),b=()=>{i.value<C.value&&i.value++},y=()=>{i.value>1&&i.value--},E=()=>{s.value=window.innerWidth<=768,m()},R=e=>{_(),u=setTimeout((()=>{c(e)}),2e3)},_=()=>{u&&(clearTimeout(u),u=null)};return(0,a.sV)((()=>{p(),m(),g(),window.addEventListener("resize",E)})),(0,a.hi)((()=>{window.removeEventListener("resize",E)})),(0,a.wB)([r,n],(()=>{i.value=1})),{visibleMovieGroups:k,currentPage:i,totalPages:C,getImageUrl:h,nextPage:b,prevPage:y,gridContainer:l,rowSize:r,startWishlistTimer:R,clearWishlistTimer:_,toggleWishlist:c,isInWishlist:d}}},C=i(1241);const b=(0,C.A)(k,[["render",m],["__scopeId","data-v-621ef426"]]);var y=b,E=i(3146),R=i(1718),_=i(8950);const K={class:"popular-container"},W={class:"view-toggle"};var T=(0,a.pM)({__name:"home-popular",setup(e){_.Yv.add(n.UTC,n.ckx),(0,a.pM)({components:{FontAwesomeIcon:r.gc}});const t=localStorage.getItem("TMDb-Key")||"",i=(0,R.e2)(t),s=(0,o.KR)("grid"),u=e=>{s.value=e},v=()=>{document.body.style.overflow="hidden"},g=()=>{document.body.style.overflow="auto"};return(0,a.sV)((()=>{v()})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("div",W,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=()=>{u("grid"),v()}),class:(0,l.C4)({active:"grid"===s.value})},[(0,a.bF)((0,o.R1)(r.gc),{icon:["fas","th"]})],2),(0,a.Lk)("button",{onClick:t[1]||(t[1]=()=>{u("list"),g()}),class:(0,l.C4)({active:"list"===s.value})},[(0,a.bF)((0,o.R1)(r.gc),{icon:["fas","bars"]})],2)]),"grid"===s.value?((0,a.uX)(),(0,a.Wv)(y,{key:0,title:"인기 영화",fetchUrl:(0,o.R1)(i)},null,8,["fetchUrl"])):(0,a.Q3)("",!0),"list"===s.value?((0,a.uX)(),(0,a.Wv)(E.A,{key:1,title:"인기 영화",fetchUrl:(0,o.R1)(i)},null,8,["fetchUrl"])):(0,a.Q3)("",!0)]))}});const L=(0,C.A)(T,[["__scopeId","data-v-1fc89b5c"]]);var M=L},3146:function(e,t,i){i.d(t,{A:function(){return C}});var a=i(6768),l=i(4232),o=i(5130);const r={class:"movie-grid",ref:"gridContainer"},n=["onMouseup"],s=["src","alt"],u={class:"movie-title"},v={key:0,class:"wishlist-indicator"},g={ref:"loadingTrigger",class:"loading-trigger"},c={key:0,class:"loading-indicator"};function d(e,t,i,d,p,h){return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",{class:(0,l.C4)(["grid-container",e.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.visibleMovieGroups,((t,i)=>((0,a.uX)(),(0,a.CE)("div",{key:i,class:(0,l.C4)(["movie-row",{full:t.length===e.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"movie-card",onMouseup:i=>e.toggleWishlist(t)},[(0,a.Lk)("img",{src:e.getImageUrl(t.poster_path),alt:t.title},null,8,s),(0,a.Lk)("div",u,(0,l.v_)(t.title),1),e.isInWishlist(t.id)?((0,a.uX)(),(0,a.CE)("div",v,"👍")):(0,a.Q3)("",!0)],40,n)))),128))],2)))),128))],2),(0,a.Lk)("div",g,[e.isLoading?((0,a.uX)(),(0,a.CE)("div",c,"Loading...")):(0,a.Q3)("",!0)],512),(0,a.bo)((0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.scrollToTopAndReset&&e.scrollToTopAndReset(...t)),class:"top-button"},"Top",512),[[o.aG,e.showTopButton]])],512)}i(4114),i(8992),i(4520),i(8872);var p=i(144),h=i(4373),m=i(4040),w=(0,a.pM)({name:"MovieGrid",props:{genreCode:{type:String,required:!0},apiKey:{type:String,required:!0},sortingOrder:{type:String,required:!0,default:"all"},voteEverage:{type:Number,required:!0,default:100}},setup(e){const t=(0,p.KR)([]),i=(0,p.KR)(1),l=(0,p.KR)(null),o=(0,p.KR)(null),r=(0,p.KR)(4),n=(0,p.KR)(!1),s=(0,p.KR)(window.innerWidth<=768),u=(0,p.KR)("grid"),v=(0,p.KR)(!0),g=(0,p.KR)(!1);let c=null;(0,a.wB)((()=>e.genreCode),(()=>{K()})),(0,a.wB)((()=>e.sortingOrder),(()=>{K()})),(0,a.wB)((()=>e.voteEverage),(()=>{K()}));const{loadWishlist:d,toggleWishlist:w,isInWishlist:f}=(0,m.n)(),k=async()=>{if(n.value||!v.value)return;n.value=!0;let a=null;try{a="0"===e.genreCode?await h.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:e.apiKey,language:"ko-KR",page:i.value,per_page:10}}):await h.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:e.apiKey,with_genres:e.genreCode,language:"ko-KR",page:i.value,per_page:10}});const l=a.data.results;if(l.length>0){let a=[...t.value,...l];"all"!==e.sortingOrder&&(a=a.filter((t=>t.original_language===e.sortingOrder))),a=a.filter((t=>{let i=!1;return i=-1===e.voteEverage||(-2===e.voteEverage?t.vote_average<=4:t.vote_average>=e.voteEverage&&t.vote_average<e.voteEverage+1),i})),t.value=a,i.value++}else v.value=!1}catch(l){console.error("Error fetching movies:",l)}finally{n.value=!1}},C=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",b=()=>{if(l.value){const e=l.value.offsetWidth,t=s.value?100:300,i=s.value?10:15;r.value=Math.floor(e/(t+i))}},y=(0,a.EW)((()=>t.value.reduce(((e,t,i)=>{const a=Math.floor(i/r.value);return e[a]||(e[a]=[]),e[a].push(t),e}),[]))),E=()=>{s.value=window.innerWidth<=768,b()},R=()=>{if(!l.value)return;const e=l.value.lastElementChild;if(!e)return;const t=l.value.getBoundingClientRect().bottom,i=e.getBoundingClientRect().bottom;t>=i-100&&!n.value&&v.value&&k()},_=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;g.value=e>300,R()},K=()=>{t.value=[],i.value=1,v.value=!0,k()},W=()=>{window.scrollTo({top:0,behavior:"smooth"}),K()},T=e=>{L(),c=window.setTimeout((()=>{w(e)}),800)},L=()=>{null!==c&&(clearTimeout(c),c=null)};return(0,a.sV)((()=>{k().then((()=>{R()})),b(),d(),window.addEventListener("resize",E),window.addEventListener("scroll",_);const e=new IntersectionObserver((e=>{e[0].isIntersecting&&!n.value&&v.value&&k()}),{rootMargin:"100px",threshold:.1});o.value&&e.observe(o.value),(0,a.hi)((()=>{window.removeEventListener("resize",E),window.removeEventListener("scroll",_),o.value&&e.unobserve(o.value)}))})),{visibleMovieGroups:y,getImageUrl:C,gridContainer:l,loadingTrigger:o,rowSize:r,isLoading:n,currentView:u,hasMore:v,showTopButton:g,scrollToTopAndReset:W,startWishlistTimer:T,clearWishlistTimer:L,toggleWishlist:w,isInWishlist:f}}}),f=i(1241);const k=(0,f.A)(w,[["render",d],["__scopeId","data-v-61afa900"]]);var C=k}}]);
//# sourceMappingURL=751.f1294eea.js.map