"use strict";(self["webpackChunkvue_assignment"]=self["webpackChunkvue_assignment"]||[]).push([[751],{1718:function(e,t,r){r.d(t,{H:function(){return o},_D:function(){return l},e2:function(){return n},eI:function(){return a}});var i=r(4335);const o=async e=>{try{const t=await i.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR`);return console.log(t.data.results[0]),t.data.results[0]}catch(t){console.error("Error fetching featured movie:",t)}},n=(e,t=1)=>`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${t}`,a=(e,t=2)=>`https://api.themoviedb.org/3/movie/now_playing?api_key=${e}&language=ko-KR&page=${t}`,l=(e,t,r=1)=>`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=${t}&language=ko-KR&page=${r}`},751:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var i=r(641),o=r(33),n=r(953),a=r(1273),l=r(6188);const s={class:"movie-grid",ref:"gridContainer"},u=["onMouseup"],v=["src","alt"],c={class:"movie-title"},d={key:0,class:"wishlist-indicator"},g={key:0,class:"pagination"},p=["disabled"],h=["disabled"];function f(e,t,r,n,a,l){return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",{class:(0,o.C4)(["grid-container",e.currentView])},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.visibleMovieGroups,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,o.C4)(["movie-row",{full:e.length===n.rowSize}])},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"movie-card",onMouseup:t=>n.toggleWishlist(e)},[(0,i.Lk)("img",{src:n.getImageUrl(e.poster_path),alt:e.title},null,8,v),(0,i.Lk)("div",c,(0,o.v_)(e.title),1),n.isInWishlist(e.id)?((0,i.uX)(),(0,i.CE)("div",d,"👍")):(0,i.Q3)("",!0)],40,u)))),128))],2)))),128))],2),n.totalPages>1?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.prevPage&&n.prevPage(...e)),disabled:1===n.currentPage},"< 이전",8,p),(0,i.Lk)("span",null,(0,o.v_)(n.currentPage)+" / "+(0,o.v_)(n.totalPages),1),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.nextPage&&n.nextPage(...e)),disabled:n.currentPage===n.totalPages},"다음 >",8,h)])):(0,i.Q3)("",!0)],512)}r(4114),r(8992),r(8872);var m=r(4335),w=r(4040),k={name:"MovieGrid",props:{fetchUrl:{type:String,required:!0}},setup(e){const t=(0,n.KR)([]),r=(0,n.KR)(1),o=(0,n.KR)(null),a=(0,n.KR)(4),l=(0,n.KR)(20),s=(0,n.KR)(window.innerWidth<=768);(0,n.KR)("grid");let u=null;const{wishlist:v,loadWishlist:c,toggleWishlist:d,isInWishlist:g}=(0,w.n)(),p=async()=>{try{const r=120,i=Math.ceil(r/20);let o=[];for(let t=1;t<=i;t++){const r=await m.A.get(e.fetchUrl,{params:{page:t,per_page:l}});o=[...o,...r.data.results]}t.value=o.slice(0,r)}catch(r){console.error("Error fetching movies:",r)}},h=e=>`https://image.tmdb.org/t/p/w300${e}`,f=()=>{if(o.value){const e=o.value.offsetWidth,t=window.innerHeight-o.value.offsetTop,r=s.value?90:200,i=s.value?150:220,n=s.value?10:15,u=-10;a.value=Math.floor(e/(r+n));const v=Math.floor(t/(i+u));l.value=a.value*v}},k=(0,i.EW)((()=>{const e=(r.value-1)*l.value,i=e+l.value,o=t.value.slice(e,i);return o.reduce(((e,t,r)=>{const i=Math.floor(r/a.value);return e[i]||(e[i]=[]),e[i].push(t),e}),[])})),y=(0,i.EW)((()=>Math.ceil(t.value.length/l.value))),C=()=>{r.value<y.value&&r.value++},b=()=>{r.value>1&&r.value--},E=()=>{s.value=window.innerWidth<=768,f()},R=e=>{_(),u=setTimeout((()=>{d(e)}),2e3)},_=()=>{u&&(clearTimeout(u),u=null)};return(0,i.sV)((()=>{p(),f(),c(),window.addEventListener("resize",E)})),(0,i.hi)((()=>{window.removeEventListener("resize",E)})),(0,i.wB)([a,l],(()=>{r.value=1})),{visibleMovieGroups:k,currentPage:r,totalPages:y,getImageUrl:h,nextPage:C,prevPage:b,gridContainer:o,rowSize:a,startWishlistTimer:R,clearWishlistTimer:_,toggleWishlist:d,isInWishlist:g}}},y=r(6262);const C=(0,y.A)(k,[["render",f],["__scopeId","data-v-621ef426"]]);var b=C,E=r(3146),R=r(1718),_=r(7107);const K={class:"popular-container"},W={class:"view-toggle"};var I=(0,i.pM)({__name:"home-popular",setup(e){_.Yv.add(l.UTC,l.ckx),(0,i.pM)({components:{FontAwesomeIcon:a.gc}});const t=localStorage.getItem("TMDb-Key")||"",r=(0,R.e2)(t),s=(0,n.KR)("grid"),u=e=>{s.value=e},v=()=>{document.body.style.overflow="hidden"},c=()=>{document.body.style.overflow="auto"};return(0,i.sV)((()=>{v()})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",K,[(0,i.Lk)("div",W,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=()=>{u("grid"),v()}),class:(0,o.C4)({active:"grid"===s.value})},[(0,i.bF)((0,n.R1)(a.gc),{icon:["fas","th"]})],2),(0,i.Lk)("button",{onClick:t[1]||(t[1]=()=>{u("list"),c()}),class:(0,o.C4)({active:"list"===s.value})},[(0,i.bF)((0,n.R1)(a.gc),{icon:["fas","bars"]})],2)]),"grid"===s.value?((0,i.uX)(),(0,i.Wv)(b,{key:0,title:"인기 영화",fetchUrl:(0,n.R1)(r)},null,8,["fetchUrl"])):(0,i.Q3)("",!0),"list"===s.value?((0,i.uX)(),(0,i.Wv)(E.A,{key:1,title:"인기 영화",fetchUrl:(0,n.R1)(r)},null,8,["fetchUrl"])):(0,i.Q3)("",!0)]))}});const T=(0,y.A)(I,[["__scopeId","data-v-1fc89b5c"]]);var L=T},3146:function(e,t,r){r.d(t,{A:function(){return y}});var i=r(641),o=r(33),n=r(3751);const a={class:"movie-grid",ref:"gridContainer"},l=["onMouseup"],s=["src","alt"],u={class:"movie-title"},v={key:0,class:"wishlist-indicator"},c={ref:"loadingTrigger",class:"loading-trigger"},d={key:0,class:"loading-indicator"};function g(e,t,r,g,p,h){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",{class:(0,o.C4)(["grid-container",e.currentView])},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.visibleMovieGroups,((t,r)=>((0,i.uX)(),(0,i.CE)("div",{key:r,class:(0,o.C4)(["movie-row",{full:t.length===e.rowSize}])},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.id,class:"movie-card",onMouseup:r=>e.toggleWishlist(t)},[(0,i.Lk)("img",{src:e.getImageUrl(t.poster_path),alt:t.title},null,8,s),(0,i.Lk)("div",u,(0,o.v_)(t.title),1),e.isInWishlist(t.id)?((0,i.uX)(),(0,i.CE)("div",v,"👍")):(0,i.Q3)("",!0)],40,l)))),128))],2)))),128))],2),(0,i.Lk)("div",c,[e.isLoading?((0,i.uX)(),(0,i.CE)("div",d,"Loading...")):(0,i.Q3)("",!0)],512),(0,i.bo)((0,i.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.scrollToTopAndReset&&e.scrollToTopAndReset(...t)),class:"top-button"},"Top",512),[[n.aG,e.showTopButton]])],512)}r(4114),r(8992),r(4520),r(8872);var p=r(953),h=r(4335),f=r(4040),m=(0,i.pM)({name:"MovieGrid",props:{genreCode:{type:String,required:!0},apiKey:{type:String,required:!0},sortingOrder:{type:String,required:!0,default:"all"},voteEverage:{type:Number,required:!0,default:100}},setup(e){const t=(0,p.KR)([]),r=(0,p.KR)(1),o=(0,p.KR)(null),n=(0,p.KR)(null),a=(0,p.KR)(4),l=(0,p.KR)(!1),s=(0,p.KR)(window.innerWidth<=768),u=(0,p.KR)("grid"),v=(0,p.KR)(!0),c=(0,p.KR)(!1);let d=null;(0,i.wB)((()=>e.genreCode),(()=>{K()})),(0,i.wB)((()=>e.sortingOrder),(()=>{K()})),(0,i.wB)((()=>e.voteEverage),(()=>{K()}));const{loadWishlist:g,toggleWishlist:m,isInWishlist:w}=(0,f.n)(),k=async()=>{if(l.value||!v.value)return;l.value=!0;let i=null;try{i="0"===e.genreCode?await h.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:e.apiKey,language:"ko-KR",page:r.value,per_page:10}}):await h.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:e.apiKey,with_genres:e.genreCode,language:"ko-KR",page:r.value,per_page:10}});const o=i.data.results;if(o.length>0){let i=[...t.value,...o];"all"!==e.sortingOrder&&(i=i.filter((t=>t.original_language===e.sortingOrder))),i=i.filter((t=>{let r=!1;return r=-1===e.voteEverage||(-2===e.voteEverage?t.vote_average<=4:t.vote_average>=e.voteEverage&&t.vote_average<e.voteEverage+1),r})),t.value=i,r.value++}else v.value=!1}catch(o){console.error("Error fetching movies:",o)}finally{l.value=!1}},y=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",C=()=>{if(o.value){const e=o.value.offsetWidth,t=s.value?100:300,r=s.value?10:15;a.value=Math.floor(e/(t+r))}},b=(0,i.EW)((()=>t.value.reduce(((e,t,r)=>{const i=Math.floor(r/a.value);return e[i]||(e[i]=[]),e[i].push(t),e}),[]))),E=()=>{s.value=window.innerWidth<=768,C()},R=()=>{if(!o.value)return;const e=o.value.lastElementChild;if(!e)return;const t=o.value.getBoundingClientRect().bottom,r=e.getBoundingClientRect().bottom;t>=r-100&&!l.value&&v.value&&k()},_=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;c.value=e>300,R()},K=()=>{t.value=[],r.value=1,v.value=!0,k()},W=()=>{window.scrollTo({top:0,behavior:"smooth"}),K()},I=e=>{T(),d=window.setTimeout((()=>{m(e)}),800)},T=()=>{null!==d&&(clearTimeout(d),d=null)};return(0,i.sV)((()=>{k().then((()=>{R()})),C(),g(),window.addEventListener("resize",E),window.addEventListener("scroll",_);const e=new IntersectionObserver((e=>{e[0].isIntersecting&&!l.value&&v.value&&k()}),{rootMargin:"100px",threshold:.1});n.value&&e.observe(n.value),(0,i.hi)((()=>{window.removeEventListener("resize",E),window.removeEventListener("scroll",_),n.value&&e.unobserve(n.value)}))})),{visibleMovieGroups:b,getImageUrl:y,gridContainer:o,loadingTrigger:n,rowSize:a,isLoading:l,currentView:u,hasMore:v,showTopButton:c,scrollToTopAndReset:W,startWishlistTimer:I,clearWishlistTimer:T,toggleWishlist:m,isInWishlist:w}}}),w=r(6262);const k=(0,w.A)(m,[["render",g],["__scopeId","data-v-61afa900"]]);var y=k},6319:function(e,t,r){var i=r(8551),o=r(9539);e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(a){o(e,"throw",a)}}},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,r){var i=r(6840);e.exports=function(e,t,r){for(var o in t)i(e,o,t[o],r);return e}},9462:function(e,t,r){var i=r(9565),o=r(2360),n=r(6699),a=r(6279),l=r(8227),s=r(1181),u=r(5966),v=r(7657).IteratorPrototype,c=r(2529),d=r(9539),g=l("toStringTag"),p="IteratorHelper",h="WrapForValidIterator",f=s.set,m=function(e){var t=s.getterFor(e?h:p);return a(o(v),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var i=r.done?void 0:r.nextHandler();return c(i,r.done)}catch(o){throw r.done=!0,o}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var n=u(o,"return");return n?i(n,o):c(void 0,!0)}if(r.inner)try{d(r.inner.iterator,"normal")}catch(a){return d(o,"throw",a)}return o&&d(o,"normal"),c(void 0,!0)}})},w=m(!0),k=m(!1);n(k,g,"Iterator Helper"),e.exports=function(e,t){var r=function(r,i){i?(i.iterator=r.iterator,i.next=r.next):i=r,i.type=t?h:p,i.nextHandler=e,i.counter=0,i.done=!1,f(this,i)};return r.prototype=t?w:k,r}},2489:function(e,t,r){var i=r(6518),o=r(9565),n=r(9306),a=r(8551),l=r(1767),s=r(9462),u=r(6319),v=r(6395),c=s((function(){var e,t,r,i=this.iterator,n=this.predicate,l=this.next;while(1){if(e=a(o(l,i)),t=this.done=!!e.done,t)return;if(r=e.value,u(i,n,[r,this.counter++],!0))return r}}));i({target:"Iterator",proto:!0,real:!0,forced:v},{filter:function(e){return a(this),n(e),new c(l(this),{predicate:e})}})},8237:function(e,t,r){var i=r(6518),o=r(2652),n=r(9306),a=r(8551),l=r(1767),s=TypeError;i({target:"Iterator",proto:!0,real:!0},{reduce:function(e){a(this),n(e);var t=l(this),r=arguments.length<2,i=r?void 0:arguments[1],u=0;if(o(t,(function(t){r?(r=!1,i=t):i=e(i,t,u),u++}),{IS_RECORD:!0}),r)throw new s("Reduce of empty iterator with no initial value");return i}})},4520:function(e,t,r){r(2489)},8872:function(e,t,r){r(8237)}}]);
//# sourceMappingURL=751.0f9413ce.js.map