"use strict";(self["webpackChunkvue_assignment"]=self["webpackChunkvue_assignment"]||[]).push([[140],{7140:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(6768),i=a(144),l=a(4232),o=a(5130);const r={class:"dropdown-container"},s=["onClick"],u={class:"select-items"},v=["onClick"];var g=(0,n.pM)({__name:"movie-search",emits:["changeOptions"],setup(e,{emit:t}){const a=t,g={originalLanguage:["장르 (전체)","Action","Adventure","Comedy","Crime","Family"],translationLanguage:["평점 (전체)","9~10","8~9","7~8","6~7","5~6","4~5","4점 이하"],sorting:["언어 (전체)","영어","한국어"]},c={originalLanguage:"장르 (전체)",translationLanguage:"평점 (전체)",sorting:"언어 (전체)"},d=(0,i.KR)(c),p=(0,i.KR)(null),h=e=>{p.value=p.value===e?null:e},m=(e,t)=>{d.value[e]=t,p.value=null,a("changeOptions",d.value)},w=()=>{for(const e in d.value)d.value[e]=g[e][0];a("changeOptions",d.value)};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",r,[t[0]||(t[0]=(0,n.Lk)("label",null,"선호하는 설정을 선택하세요",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(g,((e,t)=>(0,n.Lk)("div",{key:t,class:"custom-select"},[(0,n.Lk)("div",{class:"select-selected",onClick:e=>h(t)},(0,l.v_)(d.value[t]),9,s),(0,n.bo)((0,n.Lk)("div",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e[0],onClick:a=>m(t,e)},(0,l.v_)(e),9,v)))),128))],512),[[o.aG,p.value===t]])]))),64)),(0,n.Lk)("button",{class:"clear-options",onClick:w},"초기화")]))}}),c=a(1241);const d=(0,c.A)(g,[["__scopeId","data-v-01b114f0"]]);var p=d,h=a(3146);const m={class:"container-search"},w={class:"container-search-bar"},C={class:"content-search"};var k=(0,n.pM)({__name:"home-search",setup(e){const t=localStorage.getItem("TMDb-Key")||"",a=(0,i.KR)("28"),l=(0,i.KR)(-1),o=(0,i.KR)("all"),r={"장르 (전체)":0,Action:28,Adventure:12,Comedy:35,Crime:80,Family:10751},s={"언어 (전체)":"all","영어":"en","한국어":"ko"},u={"평점 (전체)":-1,"9~10":9,"8~9":8,"7~8":7,"6~7":6,"5~6":5,"4~5":4,"4점 이하":-2},v=e=>{a.value=`${r[e["originalLanguage"]]}`,l.value=u[e["translationLanguage"]],o.value=s[e["sorting"]]};return(e,r)=>((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",w,[(0,n.bF)(p,{onChangeOptions:v})]),(0,n.Lk)("div",C,[(0,n.bF)(h.A,{"api-key":(0,i.R1)(t),"genre-code":a.value,"sorting-order":o.value,"vote-everage":l.value},null,8,["api-key","genre-code","sorting-order","vote-everage"])])]))}});const f=(0,c.A)(k,[["__scopeId","data-v-11eb211f"]]);var b=f},3146:function(e,t,a){a.d(t,{A:function(){return f}});var n=a(6768),i=a(4232),l=a(5130);const o={class:"movie-grid",ref:"gridContainer"},r=["onMouseup"],s=["src","alt"],u={class:"movie-title"},v={key:0,class:"wishlist-indicator"},g={ref:"loadingTrigger",class:"loading-trigger"},c={key:0,class:"loading-indicator"};function d(e,t,a,d,p,h){return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:(0,i.C4)(["grid-container",e.currentView])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.visibleMovieGroups,((t,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,i.C4)(["movie-row",{full:t.length===e.rowSize}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"movie-card",onMouseup:a=>e.toggleWishlist(t)},[(0,n.Lk)("img",{src:e.getImageUrl(t.poster_path),alt:t.title},null,8,s),(0,n.Lk)("div",u,(0,i.v_)(t.title),1),e.isInWishlist(t.id)?((0,n.uX)(),(0,n.CE)("div",v,"👍")):(0,n.Q3)("",!0)],40,r)))),128))],2)))),128))],2),(0,n.Lk)("div",g,[e.isLoading?((0,n.uX)(),(0,n.CE)("div",c,"Loading...")):(0,n.Q3)("",!0)],512),(0,n.bo)((0,n.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.scrollToTopAndReset&&e.scrollToTopAndReset(...t)),class:"top-button"},"Top",512),[[l.aG,e.showTopButton]])],512)}a(4114),a(8992),a(4520),a(8872);var p=a(144),h=a(4373),m=a(4040),w=(0,n.pM)({name:"MovieGrid",props:{genreCode:{type:String,required:!0},apiKey:{type:String,required:!0},sortingOrder:{type:String,required:!0,default:"all"},voteEverage:{type:Number,required:!0,default:100}},setup(e){const t=(0,p.KR)([]),a=(0,p.KR)(1),i=(0,p.KR)(null),l=(0,p.KR)(null),o=(0,p.KR)(4),r=(0,p.KR)(!1),s=(0,p.KR)(window.innerWidth<=768),u=(0,p.KR)("grid"),v=(0,p.KR)(!0),g=(0,p.KR)(!1);let c=null;(0,n.wB)((()=>e.genreCode),(()=>{_()})),(0,n.wB)((()=>e.sortingOrder),(()=>{_()})),(0,n.wB)((()=>e.voteEverage),(()=>{_()}));const{loadWishlist:d,toggleWishlist:w,isInWishlist:C}=(0,m.n)(),k=async()=>{if(r.value||!v.value)return;r.value=!0;let n=null;try{n="0"===e.genreCode?await h.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:e.apiKey,language:"ko-KR",page:a.value,per_page:10}}):await h.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:e.apiKey,with_genres:e.genreCode,language:"ko-KR",page:a.value,per_page:10}});const i=n.data.results;if(i.length>0){let n=[...t.value,...i];"all"!==e.sortingOrder&&(n=n.filter((t=>t.original_language===e.sortingOrder))),n=n.filter((t=>{let a=!1;return a=-1===e.voteEverage||(-2===e.voteEverage?t.vote_average<=4:t.vote_average>=e.voteEverage&&t.vote_average<e.voteEverage+1),a})),t.value=n,a.value++}else v.value=!1}catch(i){console.error("Error fetching movies:",i)}finally{r.value=!1}},f=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",b=()=>{if(i.value){const e=i.value.offsetWidth,t=s.value?100:300,a=s.value?10:15;o.value=Math.floor(e/(t+a))}},E=(0,n.EW)((()=>t.value.reduce(((e,t,a)=>{const n=Math.floor(a/o.value);return e[n]||(e[n]=[]),e[n].push(t),e}),[]))),y=()=>{s.value=window.innerWidth<=768,b()},K=()=>{if(!i.value)return;const e=i.value.lastElementChild;if(!e)return;const t=i.value.getBoundingClientRect().bottom,a=e.getBoundingClientRect().bottom;t>=a-100&&!r.value&&v.value&&k()},L=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;g.value=e>300,K()},_=()=>{t.value=[],a.value=1,v.value=!0,k()},R=()=>{window.scrollTo({top:0,behavior:"smooth"}),_()},T=e=>{I(),c=window.setTimeout((()=>{w(e)}),800)},I=()=>{null!==c&&(clearTimeout(c),c=null)};return(0,n.sV)((()=>{k().then((()=>{K()})),b(),d(),window.addEventListener("resize",y),window.addEventListener("scroll",L);const e=new IntersectionObserver((e=>{e[0].isIntersecting&&!r.value&&v.value&&k()}),{rootMargin:"100px",threshold:.1});l.value&&e.observe(l.value),(0,n.hi)((()=>{window.removeEventListener("resize",y),window.removeEventListener("scroll",L),l.value&&e.unobserve(l.value)}))})),{visibleMovieGroups:E,getImageUrl:f,gridContainer:i,loadingTrigger:l,rowSize:o,isLoading:r,currentView:u,hasMore:v,showTopButton:g,scrollToTopAndReset:R,startWishlistTimer:T,clearWishlistTimer:I,toggleWishlist:w,isInWishlist:C}}}),C=a(1241);const k=(0,C.A)(w,[["render",d],["__scopeId","data-v-61afa900"]]);var f=k}}]);
//# sourceMappingURL=140.bda34075.js.map